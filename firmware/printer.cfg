[include mainsail.cfg]
[include eddy.cfg]
[include ebb36.cfg]
[include macro.cfg]
[include KNOMI.cfg]

[mcu]
serial: /dev/serial/by-id/usb-Klipper_stm32g0b1xx_3F0018000C504B4633373520-if00

[exclude_object]



[temperature_sensor raspberry_pi]
sensor_type: temperature_host
min_temp: 10
max_temp: 100



[printer]
kinematics: corexy
max_velocity: 100
max_accel: 1000  			
max_z_velocity: 15 			
max_z_accel: 350
square_corner_velocity: 5.0

[stepper_x]
step_pin: PE2
dir_pin: PB4
enable_pin: !PC11
microsteps: 16
rotation_distance: 40
#endstop_pin: ^PF3
endstop_pin: tmc2209_stepper_x:virtual_endstop
position_min: 0
##--------------------------------------------------------------------

##	Uncomment below for 250mm build
#position_endstop: 250
#position_max: 250

##	Uncomment for 300mm build
#position_endstop: 300
#position_max: 300

##	Uncomment for 350mm build
position_endstop: 350
position_max: 350

##--------------------------------------------------------------------
homing_speed: 100   #Max 100
homing_retract_dist: 0
homing_positive_dir: true


##	Make sure to update below for your relevant driver (2208 or 2209)
[tmc2209 stepper_x]
uart_pin: PC10
diag_pin: PF3 
interpolate: True
run_current: 0.8
hold_current: 0.7
sense_resistor: 0.110
stealthchop_threshold: 0
driver_SGTHRS: 100

## Y Stepper on Motor2 (A Motor)
[stepper_y]
step_pin: PF12
dir_pin: PF11
enable_pin: !PB3
microsteps: 16
rotation_distance: 40
#endstop_pin: ^PF4
position_min: -6
endstop_pin: tmc2209_stepper_y:virtual_endstop
##--------------------------------------------------------------------

##	Uncomment for 250mm build
#position_endstop: 250
#position_max: 250

##	Uncomment for 300mm build
#position_endstop: 300
#position_max: 300

##	Uncomment for 350mm build
position_endstop: 355
position_max: 355

##--------------------------------------------------------------------
homing_speed: 100  #Max 100
homing_retract_dist: 0
homing_positive_dir: true

##	Make sure to update below for your relevant driver (2208 or 2209)
[tmc2209 stepper_y]
uart_pin: PF13
diag_pin: PF4
interpolate: True
run_current: 0.8
hold_current: 0.7
sense_resistor: 0.110
stealthchop_threshold: 0
driver_SGTHRS: 130 # 255 is most sensitive value, 0 is least sensitive


#####################################################################
# 	Z Stepper Settings
#####################################################################

## Z0 Stepper - Front Left on MOTOR3_A
[stepper_z]
step_pin: PD7
dir_pin: PD6
enable_pin: !PF10
rotation_distance: 40
gear_ratio: 80:16
microsteps: 16
#endstop_pin: ^PF5
##  Z-position of nozzle (in mm) to z-endstop trigger point relative to print surface (Z0)
##  (+) value = endstop above Z0, (-) value = endstop below
##	Increasing position_endstop brings nozzle closer to the bed
##  After you run Z_ENDSTOP_CALIBRATE, position_endstop will be stored at the very end of your config
#position_endstop: -0.5
endstop_pin: probe:z_virtual_endstop
##--------------------------------------------------------------------

##	Uncomment below for 250mm build
#position_max: 240

##	Uncomment below for 300mm build
#position_max: 290

##	Uncomment below for 350mm build
position_max: 340

##--------------------------------------------------------------------
position_min: -20
homing_speed: 8
second_homing_speed: 3
homing_retract_dist: 3

##	Make sure to update below for your relevant driver (2208 or 2209)
[tmc2209 stepper_z]
uart_pin: PF9
diag_pin: PF5
interpolate: true
run_current: 0.8
hold_current: 0.8
sense_resistor: 0.110
stealthchop_threshold: 0

##	Z1 Stepper - Rear Left on Motor4
[stepper_z1]
step_pin: PD3
dir_pin: !PD2
enable_pin: !PD5
rotation_distance: 40
gear_ratio: 80:16
microsteps: 16

##	Make sure to update below for your relevant driver (2208 or 2209)
[tmc2209 stepper_z1]
uart_pin: PD4
diag_pin: PC0
interpolate: true
run_current: 0.8
hold_current: 0.8
sense_resistor: 0.110
stealthchop_threshold: 0

##	Z2 Stepper - Rear Right on Motor5
[stepper_z2]
step_pin: PC9
dir_pin: PC8
enable_pin: !PD1
rotation_distance: 40
gear_ratio: 80:16
microsteps: 16

##	Make sure to update below for your relevant driver (2208 or 2209)
[tmc2209 stepper_z2]
uart_pin: PD0
interpolate: true
run_current: 0.8
hold_current: 0.80
sense_resistor: 0.110
stealthchop_threshold: 0

##	Z3 Stepper - Front Right on Motor6
[stepper_z3]
step_pin: PD8
dir_pin: !PC6
enable_pin: !PC7
rotation_distance: 40
gear_ratio: 80:16
microsteps: 16

#	Make sure to update below for your relevant driver (2208 or 2209)
[tmc2209 stepper_z3]
uart_pin: PD10
interpolate: true
run_current: 0.8
hold_current: 0.80
sense_resistor: 0.110
stealthchop_threshold: 0


[extruder]
step_pin: EBB:PB14
dir_pin: EBB:PA8
enable_pin: !EBB:PB6
microsteps: 16
rotation_distance: 4.637
full_steps_per_rotation: 200
nozzle_diameter: 0.400
filament_diameter: 1.750
heater_pin: EBB:PB4
sensor_type: EPCOS 100K B57560G104F
pullup_resistor: 2200
sensor_pin: EBB:PA3
#control: pid
#pid_Kp: 21.527
#pid_Ki: 1.063
#pid_Kd: 108.982
min_temp: 0
max_temp: 250

[tmc2209 extruder]
uart_pin: EBB:PB3
run_current: 0.650
stealthchop_threshold: 999999


[heater_bed]
##	SSR Pin - BED_OUT
heater_pin: PB7
sensor_type: Generic 3950
sensor_pin: PA0
##	Adjust Max Power so your heater doesn't warp your bed
max_power: 0.6
min_temp: 0
max_temp: 120
#control: pid
#pid_kp: 58.437
#pid_ki: 2.347
#pid_kd: 363.769

[quad_gantry_level]
##	Use QUAD_GANTRY_LEVEL to level a gantry.
##	Min & Max gantry corners - measure from nozzle at MIN (0,0) and 
##	MAX (250, 250), (300,300), or (350,350) depending on your printer size
##	to respective belt positions

##	Gantry Corners for 350mm Build
##	Uncomment for 350mm build
gantry_corners:
	-60,-10
	410,420
#	Probe points
points:
	50,25
	50,275
	300,275
	300,25
#--------------------------------------------------------------------
speed: 100
horizontal_move_z: 10
retries: 5
retry_tolerance: 0.0075
max_adjust: 10

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [probe_eddy_current btt_eddy]
#*# reg_drive_current = 15
#*# calibrate =
#*# 	0.050000:3216164.947,0.090000:3215474.202,0.130000:3214712.537,
#*# 	0.170000:3213922.387,0.210000:3213154.832,0.250000:3212429.788,
#*# 	0.290000:3211673.791,0.330000:3210944.123,0.370000:3210212.481,
#*# 	0.410000:3209513.025,0.450000:3208777.406,0.490000:3208039.763,
#*# 	0.530000:3207317.026,0.570000:3206684.679,0.610000:3205987.165,
#*# 	0.650000:3205284.348,0.690000:3204596.121,0.730000:3203943.947,
#*# 	0.770000:3203275.648,0.810000:3202617.484,0.850000:3201955.959,
#*# 	0.890000:3201342.423,0.930000:3200695.513,0.970000:3200069.346,
#*# 	1.010000:3199449.814,1.050000:3198859.649,1.090000:3198252.142,
#*# 	1.130000:3197667.282,1.170000:3197051.221,1.210000:3196481.581,
#*# 	1.250000:3195912.076,1.290000:3195357.217,1.330000:3194805.683,
#*# 	1.370000:3194286.253,1.410000:3193756.696,1.450000:3193227.929,
#*# 	1.490000:3192688.415,1.530000:3192196.255,1.570000:3191690.830,
#*# 	1.610000:3191198.029,1.650000:3190692.473,1.690000:3190213.634,
#*# 	1.730000:3189755.477,1.770000:3189306.790,1.810000:3188846.601,
#*# 	1.850000:3188403.708,1.890000:3187962.252,1.930000:3187549.842,
#*# 	1.970000:3187122.055,2.010000:3186712.500,2.050000:3186288.983,
#*# 	2.090000:3185891.701,2.130000:3185496.901,2.170000:3185121.978,
#*# 	2.210000:3184730.638,2.250000:3184352.477,2.290000:3183960.482,
#*# 	2.330000:3183627.019,2.370000:3183258.852,2.410000:3182899.972,
#*# 	2.450000:3182552.733,2.490000:3182209.872,2.530000:3181869.024,
#*# 	2.570000:3181533.612,2.610000:3181198.848,2.650000:3180884.735,
#*# 	2.690000:3180565.513,2.730000:3180254.560,2.770000:3179945.658,
#*# 	2.810000:3179648.337,2.850000:3179359.571,2.890000:3179062.740,
#*# 	2.930000:3178770.125,2.970000:3178504.043,3.010000:3178208.621,
#*# 	3.050000:3177939.155,3.090000:3177666.950,3.130000:3177422.522,
#*# 	3.170000:3177159.619,3.210000:3176901.444,3.250000:3176644.750,
#*# 	3.290000:3176409.398,3.330000:3176164.781,3.370000:3175914.348,
#*# 	3.410000:3175671.040,3.450000:3175437.756,3.490000:3175231.537,
#*# 	3.530000:3175008.023,3.570000:3174776.208,3.610000:3174558.975,
#*# 	3.650000:3174349.487,3.690000:3174140.003,3.730000:3173931.999,
#*# 	3.770000:3173736.495,3.810000:3173531.907,3.850000:3173340.343,
#*# 	3.890000:3173139.685,3.930000:3172941.542,3.970000:3172756.223,
#*# 	4.010000:3172582.755,4.050000:3172396.857
#*#
#*# [temperature_probe btt_eddy]
#*# calibration_temp = 41.803110
#*#
#*# [extruder]
#*# control = pid
#*# pid_kp = 18.451
#*# pid_ki = 1.519
#*# pid_kd = 56.044
#*#
#*# [heater_bed]
#*# control = pid
#*# pid_kp = 37.412
#*# pid_ki = 1.425
#*# pid_kd = 245.518
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	0.025705, 0.031926, 0.037178, 0.048923, 0.050530, 0.061848, 0.064264, 0.066303, 0.062223, 0.058577, 0.050101, 0.047261, 0.039964, 0.023202, 0.008953, 0.003498
#*# 	0.026984, 0.019419, 0.025315, 0.037552, 0.047315, 0.060988, 0.061900, 0.063406, 0.066678, 0.065068, 0.057398, 0.051711, 0.045278, 0.031926, 0.022367, 0.004334
#*# 	0.025707, 0.032730, 0.036374, 0.047315, 0.052140, 0.056165, 0.057773, 0.060988, 0.055791, 0.048119, 0.036749, 0.025709, 0.015630, 0.005171, -0.003626, -0.010853
#*# 	0.024481, 0.013127, 0.022756, 0.030747, 0.038839, 0.044046, 0.051711, 0.056165, 0.055791, 0.050905, 0.044046, 0.036857, 0.030747, 0.018585, 0.007285, -0.003629
#*# 	0.020699, 0.029883, 0.031122, 0.035570, 0.044475, 0.048923, 0.050530, 0.046886, 0.040020, 0.032730, 0.026986, 0.018140, 0.005171, -0.008248, -0.017403, -0.024019
#*# 	-0.021383, -0.026653, -0.019626, -0.009082, -0.000289, 0.003943, 0.007674, 0.005616, 0.002661, -0.001513, -0.002347, -0.008248, -0.014362, -0.031040, -0.039063, -0.050950
#*# 	-0.015239, -0.006966, 0.001825, 0.005171, 0.005171, 0.006450, 0.011011, 0.008508, 0.000990, -0.005745, -0.013894, -0.021383, -0.028472, -0.038186, -0.050950, -0.062012
#*# 	-0.018748, -0.031574, -0.025367, -0.020503, -0.011730, -0.006966, -0.001513, 0.007674, 0.000545, -0.004463, -0.009529, -0.016117, -0.024022, -0.038122, -0.046968, -0.057601
#*# 	-0.002347, 0.001825, 0.001825, 0.008119, 0.009399, 0.011845, 0.026539, 0.046886, 0.024036, 0.002214, -0.008248, -0.016117, -0.023142, -0.035490, -0.043858, -0.050068
#*# 	-0.026244, -0.035490, -0.028472, -0.022671, -0.020503, -0.010319, 0.004780, 0.021088, 0.005616, -0.007413, -0.013014, -0.021385, -0.025776, -0.037651, -0.043331, -0.056719
#*# 	-0.012485, -0.001123, 0.002661, 0.010177, 0.014796, 0.020699, 0.025315, 0.022756, 0.020253, 0.011011, 0.006839, -0.004015, -0.012953, -0.021383, -0.031104, -0.040349
#*# 	-0.025776, -0.026244, -0.016117, -0.013014, -0.003237, 0.007674, 0.009342, 0.009788, 0.009342, 0.008564, 0.005171, -0.001569, -0.008634, -0.016117, -0.022262, -0.035490
#*# 	-0.024485, -0.015239, -0.002347, 0.004334, 0.005171, 0.014348, 0.015243, 0.012290, 0.015243, 0.013127, 0.007674, -0.004908, -0.010789, -0.020503, -0.027592, -0.036774
#*# 	-0.027531, -0.030633, -0.014710, 0.000545, 0.003498, 0.016077, 0.018585, 0.016077, 0.020699, 0.017748, 0.015243, 0.008508, 0.002661, -0.004908, -0.012137, -0.025774
#*# 	-0.014301, -0.003237, 0.010177, 0.024481, 0.032730, 0.038410, 0.039645, 0.036803, 0.037607, 0.037607, 0.032355, 0.021533, 0.014022, 0.007674, 0.004334, 0.006005
#*# 	-0.025776, -0.029756, -0.017871, -0.000678, 0.011011, 0.020253, 0.019864, 0.022756, 0.025315, 0.025705, 0.023591, 0.021978, 0.016914, 0.016525, 0.020253, 0.014022
#*# x_count = 16
#*# y_count = 16
#*# mesh_x_pps = 2
#*# mesh_y_pps = 2
#*# algo = bicubic
#*# tension = 0.2
#*# min_x = 40.0
#*# max_x = 310.0
#*# min_y = 40.0
#*# max_y = 310.0
